---
title: 层叠规则
tag:
  - css
date: 2024-04-24
---

## 冲突发生了

CSS 的本质就是声明规则，如果作用于某个元素的多个规则发生了冲突，那么就需要根据一定的规则来解决这个冲突。这个规则就是层叠规则。

比如，我们有一个元素 `<li>`，用户代理样式规定了他的样子，而我们也给了一个行内样式来改变，同时某些外部 CSS 也规定了这个规则，我们最终应该取哪个规则来使用？

## 优先级

CSS 的层叠规则可以通过三步来解决：

1. 判断规则来源
   来源通常有三种：用户代理样式、用户样式（浏览器允许用户设定）、作者样式（即我们作为开发者写的样式），他们的优先级从小到大排列。
1. 判断作用域（出现的位置）
   共有三种作用域：行内样式、内部样式表、外部样式表，他们的优先级从小到大排列。
1. 判断选择器优先级
   选择器的优先级是根据选择器的特殊性来判断的，特殊性越高，优先级越高。计算规则可以看 [CSS 选择器](./selectors.md)
1. 判断样式的顺序
   样式的顺序也是有优先级的，后面的样式会覆盖前面的样式

最后还有一个特例，就是 `!important`，这个关键字可以让一个样式永远生效，不管其他的优先级如何。

## 继承

CSS 的继承规则是，如果一个元素没有设置某个属性，那么这个属性*可能*会继承父元素的属性，这样可以减少代码量，同时也可以让页面的样式更加统一。

一般来说字体相关的属性会继承，比如 `font-size`，`color`，`font-family`，`line-height` 等，而背景相关的属性不会继承，比如 `background-color`，`background-image` 等。
